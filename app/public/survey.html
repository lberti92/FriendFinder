<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Survey</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>

    <div class="container">
        <h2>Survey Questions</h2>
        <hr>
        <h3><strong>About You</strong></h3>
        <h4>Please answer all questions to the best of your ability.</h4>
        <form role="form">
            <h4>Name (Required)</h4>
            <input type="text" class="form-control" id="name" required>

            <h4>Link to Photo Image (Required) </h4>
            <input type="text" class="form-control" id="photo" required>
            <hr>
            <h3><strong> Question 1</strong></h3>
            <h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
            <select class="chosen-select" id="q1" data-placeholder="Select an option">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 2</strong></h3>
            <h5>Generally speaking, you rely more on your experience than your imagination.</h5>
            <select class="chosen-select" id="q2">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 3</strong></h3>
            <h5>You find it easy to stay relaxed and focused even when there is some pressure.</h5>
            <select class="chosen-select" id="q3">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 4</strong></h3>
            <h5>You rarely do something just out of sheer curiosity.</h5>
            <select class="chosen-select" id="q4">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 5</strong></h3>
            <h5>People can rarely upset you.</h5>
            <select class="chosen-select" id="q5">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 6</strong></h3>
            <h5>It is often difficulet for you to relate to other people's feelings.</h5>
            <select class="chosen-select" id="q6">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 7</strong></h3>
            <h5>In a discussion, truth should be more important than people's sensitivities.</h5>
            <select class="chosen-select" id="q7">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 8</strong></h3>
            <h5>You rarely get carried away by fantasies and ideas.</h5>
            <select class="chosen-select" id="q8">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 9</strong></h3>
            <h5>You think that everyone's views should be respected regardless of whether they are supported by
                facts or not.</h5>
            <select class="chosen-select" id="q9">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>
            <h3><strong> Question 10</strong></h3>
            <h5>You feel more energetic after spending time with a group of people.</h5>
            <select class="chosen-select" id="q10">
                <option value="1">1 (Stongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>

            <button type="submit" class="btn btn-primary btn-lg btn-block"><i class="fa fa-check-circle"></i>
                Submit</button>
        </form>
    </div>



    <footer class="footer">
        <div class="container">
            <p><a href="/api/friends" target="_blank">API Friends List</a> | <a
                    href="https://github.com/lberti92/FriendFinder" target="_blank">GitHub Repo</a>
        </div>
    </footer>

    </div>

</body>

</html>


<script type="text/javascript">

    $(".submit").on("click", function (event) {
        event.preventDefault();

        var newSurvey = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val(),
        ]
        };

        console.log(newSurvey);

        $.post("/api/friends", newSurvey)
            .then(function (data) {
                alert("Best Match");
                
                $("#match-name").text(data.name);
                $("#match-img").attr("src", data.photo);
                
                $("#results-modal").modal("toggle");
            })

    });


    function runSurvey() {
        // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
        $.ajax({ url: "/api/friends", method: "GET" })
            .then(function (friendData) {

                // Here we then log the tableData to console, where it will show up as an object.
                console.log(friendData);
                console.log("------------------------------------");


                // Loop through and display each of the customers
                for (var i = 0; i < friendData.length; i++) {

                    // Get a reference to the tableList element and populate it with tables
                    var friendList = $("#friendList");

                    // Then display the fields in the HTML (Section Name, Date, URL)
                    var listItem = $("<li class='list-group-item mt-4'>");

                    listItem.append(
                        $("<h2>").text("Table #" + (i + 1)),
                        $("<hr>"),
                        $("<h2>").text("ID: " + friendData[i].customerID),
                        $("<h2>").text("Name: " + friendData[i].customerName),
                        $("<h2>").text("Email: " + friendData[i].customerEmail),
                        $("<h2>").text("Phone: " + friendData[i].phoneNumber)
                    );

                    tableList.append(listItem);
                }
            });
    }

</script>

<!-- var questions = [
"Your mind is always buzzing with unexplored ideas and plans.",
"Generally speaking, you rely more on your experience than your imagination.",
"You find it easy to stay relaxed and focused even when there is some pressure.",
"You rarely do something just out of sheer curiosity.",
"People can rarely upset you.",
"It is often difficult for you to relate to other people's feelings.",
"In a discussion, truth should be more important than people's sensitivities.",
"You rarely get carried away by fantasies and ideas.",
"You think that everyone's views should be respected regardless of whether they are supported by facts or not.",
"You feel more energetic after spending time with a group of people",
]

var options = [
"1 (Strongly Disagree)",
"2",
"3",
"4",
"5 (Stongly Agree"
] -->
<!-- Save logic to adjust later on -->
<!-- function renderQuestions() {
    console.log("in renderQuestion")
    for (var i = 0; i < questions.length; i++) {
        console.log(questions[i]);
        $("#question").append(`<h3><strong> Question ${[i + 1]} </strong></h3>`);
        $("#question").append(`<div id=questionText> ${questions[i]}</div>`);

        for (var j = 0; j < options.length; j++) {
            console.log(options[i]);
            var option = (`<option>${options[j]}</option>`);

            var select = $("<select>").attr("class, form control").attr("id", `q${[i + 1]}`)
            console.log(select);
            // select.append("");
            $("#question").append(select);
        }
    }
} -->